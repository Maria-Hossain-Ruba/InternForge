@{
    ViewData["Title"] = "SME Dashboard";
}

<header class="if-navbar">
    <div class="if-navbar-inner">
        <div class="if-navbar-left">
            <div class="if-navbar-logo">
                <img src="~/images/internforge-logo.svg" alt="InternForge logo" class="if-logo-img" />
            </div>
            <div class="if-navbar-title">
                <span class="if-navbar-title-main">InternForge</span>
                <span class="if-navbar-title-sub">SME Control Center</span>
            </div>
        </div>

        <div class="if-navbar-center">
            <nav class="if-navbar-links">
                <a href="#" class="if-navbar-link if-navbar-link-active">Overview</a>
                <a href="#" class="if-navbar-link">My Roles</a>
                <a href="#" class="if-navbar-link">Applications</a>
                <a href="#" class="if-navbar-link">Interns</a>
            </nav>
        </div>

        <div class="if-navbar-right">
            <span class="if-navbar-pill">SME</span>
            <div class="if-navbar-name">
                <span class="if-navbar-name-main">Aurora Labs</span>
                <span class="if-navbar-name-sub">Hiring Partner</span>
            </div>
            <div class="if-navbar-avatar">AL</div>
        </div>
    </div>
</header>

<main class="if-layout">
    <!-- SIDEBAR -->
    <aside class="if-sidebar">
        <div class="if-sidebar-header">
            <span class="if-sidebar-label">Workspace</span>
            <span class="if-sidebar-status-pill">4 open roles</span>
        </div>

        <div class="if-sidebar-menu">
            <div class="if-sidebar-item if-sidebar-item-active" data-if-nav="sme-overview">
                <div class="if-sidebar-item-icon">📊</div>
                <span>Overview</span>
            </div>
            <div class="if-sidebar-item" data-if-nav="sme-roles">
                <div class="if-sidebar-item-icon">📁</div>
                <span>My Roles</span>
            </div>
            <div class="if-sidebar-item" data-if-nav="sme-apps">
                <div class="if-sidebar-item-icon">📨</div>
                <span>Applications</span>
            </div>
            <div class="if-sidebar-item" data-if-nav="sme-interns">
                <div class="if-sidebar-item-icon">🧑‍💻</div>
                <span>Interns</span>
            </div>
            <div class="if-sidebar-item" data-if-nav="sme-org">
                <div class="if-sidebar-item-icon">🏢</div>
                <span>Org Profile</span>
            </div>
            <div class="if-sidebar-item" data-if-nav="sme-billing">
                <div class="if-sidebar-item-icon">💳</div>
                <span>Billing</span>
            </div>
        </div>

        <div class="if-sidebar-separator"></div>

        <p class="if-sidebar-footnote">
            Tip: publish clear <span>project briefs</span> and respond to applications within
            48 hours to keep your InternForge ranking high.
        </p>
    </aside>

    <!-- MAIN SME CONTENT -->
    <section class="if-main">
        <!-- HEADER -->
        <div class="if-sme-header-row">
            <div class="if-sme-header-left">
                <h1 class="if-sme-org-name">Welcome back, Aurora Labs 👋</h1>
                <p class="if-sme-org-subtitle">
                    You have <span>4 live roles</span>, <span>18 new applications</span> and
                    <span>6 active interns</span> this week.
                </p>
            </div>
            <div class="if-sme-header-right">
                <span class="if-sme-badge">Response time: &lt; 12 hrs</span>
                <span class="if-sme-badge">Talent score: 4.7★</span>
            </div>
        </div>

        <!-- TOP METRICS -->
        <div class="if-sme-metrics-row">
            <div class="if-sme-metric-card">
                <div class="if-sme-metric-label">Open internship roles</div>
                <div class="if-sme-metric-main">
                    <span class="if-sme-metric-number">4</span>
                    <span class="if-sme-metric-tag">Tech &amp; Design</span>
                </div>
                <span class="if-sme-metric-positive">+1 new this week</span>
            </div>

            <div class="if-sme-metric-card">
                <div class="if-sme-metric-label">New applications</div>
                <div class="if-sme-metric-main">
                    <span class="if-sme-metric-number">18</span>
                    <span class="if-sme-metric-tag">7 shortlisted</span>
                </div>
                <span class="if-sme-metric-positive">+32% vs last week</span>
            </div>

            <div class="if-sme-metric-card">
                <div class="if-sme-metric-label">Active interns</div>
                <div class="if-sme-metric-main">
                    <span class="if-sme-metric-number">6</span>
                    <span class="if-sme-metric-tag">3 projects</span>
                </div>
                <span class="if-sme-metric-positive">Avg rating 4.8★</span>
            </div>

            <div class="if-sme-metric-card">
                <div class="if-sme-metric-label">Pending reviews</div>
                <div class="if-sme-metric-main">
                    <span class="if-sme-metric-number">3</span>
                    <span class="if-sme-metric-tag">Due in 2 days</span>
                </div>
                <span class="if-sme-metric-positive">Keep your SLA healthy</span>
            </div>
        </div>

        <!-- GRID -->
        <div class="if-main-grid">
            <!-- LEFT PANEL: PIPELINE + INTERNS -->
            <div class="if-panel">
                <div class="if-panel-header">
                    <div>
                        <div class="if-panel-title">Applications pipeline</div>
                        <div class="if-panel-sub">
                            Track candidates across all your internship roles
                        </div>
                    </div>
                    <div class="if-sme-chip-row">
                        <button class="if-sme-chip if-sme-chip-active" data-sme-filter="all">
                            All roles
                        </button>
                        <button class="if-sme-chip" data-sme-filter="dev">
                            Dev
                        </button>
                        <button class="if-sme-chip" data-sme-filter="design">
                            Design
                        </button>
                        <button class="if-sme-chip" data-sme-filter="marketing">
                            Marketing
                        </button>
                    </div>
                </div>

                <!-- PIPELINE COLUMNS -->
                <div class="if-sme-pipeline-grid" id="if-sme-pipeline">
                    <!-- Column: New -->
                    <div class="if-sme-pipeline-column">
                        <div class="if-sme-pipeline-header">
                            <span class="if-sme-pipeline-title">New</span>
                            <span class="if-sme-pipeline-count">6</span>
                        </div>
                        <div class="if-sme-pipeline-list">
                            <article class="if-sme-pipeline-card" data-sme-role="dev">
                                <div class="if-sme-pipeline-name">Niruba N.</div>
                                <div class="if-sme-pipeline-role">
                                    ASP.NET Core Marketplace Intern
                                </div>
                                <div class="if-sme-pipeline-meta">
                                    <span>Applied · 2h ago</span>
                                    <span class="if-sme-pill-soft">Match 92%</span>
                                </div>
                            </article>
                            <article class="if-sme-pipeline-card" data-sme-role="design">
                                <div class="if-sme-pipeline-name">Ananya S.</div>
                                <div class="if-sme-pipeline-role">
                                    Product Landing Page Designer
                                </div>
                                <div class="if-sme-pipeline-meta">
                                    <span>Applied · 5h ago</span>
                                    <span class="if-sme-pill-soft">Portfolio 7 items</span>
                                </div>
                            </article>
                        </div>
                    </div>

                    <!-- Column: Shortlisted -->
                    <div class="if-sme-pipeline-column">
                        <div class="if-sme-pipeline-header">
                            <span class="if-sme-pipeline-title">Shortlisted</span>
                            <span class="if-sme-pipeline-count">4</span>
                        </div>
                        <div class="if-sme-pipeline-list">
                            <article class="if-sme-pipeline-card" data-sme-role="dev">
                                <div class="if-sme-pipeline-name">Rahul M.</div>
                                <div class="if-sme-pipeline-role">
                                    API Integration &amp; Automation
                                </div>
                                <div class="if-sme-pipeline-meta">
                                    <span>Shortlisted · 1d ago</span>
                                    <span class="if-sme-pill-soft">Tech score 8.7</span>
                                </div>
                            </article>
                            <article class="if-sme-pipeline-card" data-sme-role="marketing">
                                <div class="if-sme-pipeline-name">Sara K.</div>
                                <div class="if-sme-pipeline-role">
                                    Social Media Insights Dashboard
                                </div>
                                <div class="if-sme-pipeline-meta">
                                    <span>Shortlisted · 3d ago</span>
                                    <span class="if-sme-pill-soft">Case study added</span>
                                </div>
                            </article>
                        </div>
                    </div>

                    <!-- Column: Interviewing -->
                    <div class="if-sme-pipeline-column">
                        <div class="if-sme-pipeline-header">
                            <span class="if-sme-pipeline-title">Interviewing</span>
                            <span class="if-sme-pipeline-count">3</span>
                        </div>
                        <div class="if-sme-pipeline-list">
                            <article class="if-sme-pipeline-card" data-sme-role="dev">
                                <div class="if-sme-pipeline-name">Aditya P.</div>
                                <div class="if-sme-pipeline-role">
                                    Backend API Intern
                                </div>
                                <div class="if-sme-pipeline-meta">
                                    <span>Interview · Tomorrow</span>
                                    <span class="if-sme-pill-soft">Reminder set</span>
                                </div>
                            </article>
                            <article class="if-sme-pipeline-card" data-sme-role="design">
                                <div class="if-sme-pipeline-name">Meera L.</div>
                                <div class="if-sme-pipeline-role">
                                    UI Design Sprint Intern
                                </div>
                                <div class="if-sme-pipeline-meta">
                                    <span>Interview · Fri</span>
                                    <span class="if-sme-pill-soft">Portfolio shared</span>
                                </div>
                            </article>
                        </div>
                    </div>

                    <!-- Column: Hired -->
                    <div class="if-sme-pipeline-column">
                        <div class="if-sme-pipeline-header">
                            <span class="if-sme-pipeline-title">Hired</span>
                            <span class="if-sme-pipeline-count">2</span>
                        </div>
                        <div class="if-sme-pipeline-list">
                            <article class="if-sme-pipeline-card" data-sme-role="dev">
                                <div class="if-sme-pipeline-name">Kiran V.</div>
                                <div class="if-sme-pipeline-role">
                                    AI Resume Screener Intern
                                </div>
                                <div class="if-sme-pipeline-meta">
                                    <span>Start · 8 Apr</span>
                                    <span class="if-sme-pill-soft">Onboarding ready</span>
                                </div>
                            </article>
                            <article class="if-sme-pipeline-card" data-sme-role="marketing">
                                <div class="if-sme-pipeline-name">Lina T.</div>
                                <div class="if-sme-pipeline-role">
                                    Growth Experiments Intern
                                </div>
                                <div class="if-sme-pipeline-meta">
                                    <span>Started · 1w ago</span>
                                    <span class="if-sme-pill-soft">Sprint 1 live</span>
                                </div>
                            </article>
                        </div>
                    </div>
                </div>

                <!-- ACTIVE INTERNS -->
                <div class="if-panel-header" style="margin-top:1rem;">
                    <div>
                        <div class="if-panel-title">Active interns</div>
                        <div class="if-panel-sub">
                            Snapshot of live projects and performance
                        </div>
                    </div>
                    <a href="#" class="if-sme-link-inline">View all interns →</a>
                </div>

                <div class="if-sme-intern-list">
                    <article class="if-sme-intern-row">
                        <div>
                            <div class="if-sme-intern-name">Niruba N.</div>
                            <div class="if-sme-intern-role">
                                ASP.NET Core Project Marketplace
                            </div>
                        </div>
                        <div class="if-sme-intern-metrics">
                            <span>Milestone: API integration</span>
                            <span class="if-sme-intern-score">Progress: 78%</span>
                        </div>
                        <div class="if-sme-intern-metrics">
                            <span>Feedback: ⭐⭐⭐⭐☆</span>
                            <span>Last update: 6h ago</span>
                        </div>
                        <div class="if-sme-intern-actions">
                            <a href="#" class="if-sme-link-inline">View workspace</a>
                            <a href="#" class="if-sme-link-inline">Add feedback</a>
                        </div>
                    </article>

                    <article class="if-sme-intern-row">
                        <div>
                            <div class="if-sme-intern-name">Ananya S.</div>
                            <div class="if-sme-intern-role">
                                Product Landing Page Design
                            </div>
                        </div>
                        <div class="if-sme-intern-metrics">
                            <span>Milestone: Final review</span>
                            <span class="if-sme-intern-score">Progress: 93%</span>
                        </div>
                        <div class="if-sme-intern-metrics">
                            <span>Feedback: ⭐⭐⭐⭐⭐</span>
                            <span>Next: Case study export</span>
                        </div>
                        <div class="if-sme-intern-actions">
                            <a href="#" class="if-sme-link-inline">View files</a>
                            <a href="#" class="if-sme-link-inline">Mark complete</a>
                        </div>
                    </article>
                </div>
            </div>

            <!-- RIGHT PANEL: QUICK ACTIONS + ACTIVITY -->
            <aside class="if-panel">
                <div class="if-sme-side-card">
                    <div class="if-sme-side-title">Quick actions</div>
                    <div class="if-sme-side-sub">
                        Frequently used tools for SME partners
                    </div>
                    <div class="if-sme-chip-row" style="margin-top:0.4rem;">
                        <button class="if-chip if-chip-active" id="if-sme-new-role-btn">
                            ➕ Post new role
                        </button>
                        <button class="if-chip">
                            ✉️ Bulk message candidates
                        </button>
                        <button class="if-chip">
                            📅 Schedule interviews
                        </button>
                    </div>
                    <p class="if-sme-side-sub" id="if-sme-quick-message" style="margin-top:0.5rem;">
                        Draft a new SME internship brief in under 2 minutes using templates.
                    </p>
                </div>

                <div class="if-sme-side-card">
                    <div class="if-sme-side-title">Workspace activity</div>
                    <div class="if-sme-side-sub">
                        Latest actions across your roles and interns
                    </div>
                    <div class="if-sme-activity-list">
                        <div class="if-sme-activity-item">
                            <span class="if-sme-activity-label">
                                2 candidates moved to Interviewing.
                            </span>
                            <span class="if-sme-activity-time">5 min ago</span>
                        </div>
                        <div class="if-sme-activity-item">
                            <span class="if-sme-activity-label">
                                Feedback submitted for Niruba N.
                            </span>
                            <span class="if-sme-activity-time">1 h ago</span>
                        </div>
                        <div class="if-sme-activity-item">
                            <span class="if-sme-activity-label">
                                New role draft: “Growth Experiments Intern”.
                            </span>
                            <span class="if-sme-activity-time">Yesterday</span>
                        </div>
                    </div>
                </div>

                <div class="if-sme-side-card">
                    <div class="if-sme-side-title">Org health</div>
                    <div class="if-sme-side-sub">
                        How attractive your SME looks to top interns
                    </div>
                    <ul style="margin:0.4rem 0 0; padding-left:1.2rem; font-size:0.76rem; color:var(--if-text-muted);">
                        <li>Profile completeness: <span style="color:#a5b4fc;">86%</span></li>
                        <li>Average response time: <span style="color:#4ade80;">11 hours</span></li>
                        <li>Offer acceptance rate: <span style="color:#facc15;">78%</span></li>
                    </ul>
                </div>
            </aside>
        </div>
    </section>
</main>

@section Scripts {
    <script>
        // Sidebar active state
        document.querySelectorAll(".if-sidebar-item").forEach(function (item) {
            item.addEventListener("click", function () {
                document.querySelectorAll(".if-sidebar-item")
                    .forEach(function (i) { i.classList.remove("if-sidebar-item-active"); });
                item.classList.add("if-sidebar-item-active");
            });
        });

        // SME filter chips
        const smeFilterButtons = document.querySelectorAll(".if-sme-chip");
        const smePipelineCards = document.querySelectorAll(".if-sme-pipeline-card");

        smeFilterButtons.forEach((btn) => {
            btn.addEventListener("click", () => {
                const selected = btn.getAttribute("data-sme-filter");

                smeFilterButtons.forEach((b) => b.classList.remove("if-sme-chip-active"));
                btn.classList.add("if-sme-chip-active");

                smePipelineCards.forEach((card) => {
                    const role = card.getAttribute("data-sme-role");
                    if (selected === "all" || selected === role) {
                        card.style.display = "flex";
                    } else {
                        card.style.display = "none";
                    }
                });
            });
        });

        // Quick actions: change helper text when posting new role
        const newRoleBtn = document.getElementById("if-sme-new-role-btn");
        const quickMsg = document.getElementById("if-sme-quick-message");

        if (newRoleBtn && quickMsg) {
            newRoleBtn.addEventListener("click", () => {
                quickMsg.textContent = "We’ll pre-fill your next SME role with your most successful brief. Just adjust dates and stipend.";
                setTimeout(() => {
                    quickMsg.textContent = "Draft a new SME internship brief in under 2 minutes using templates.";
                }, 2500);
            });
        }
    </script>
}
